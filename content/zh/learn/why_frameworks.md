# 为什么选择框架？

一些程序员强烈反对使用框架。他们认为框架臃肿、缓慢且难以学习。他们说框架是不必要的，没有它们你也可以编写更好的代码。关于使用框架的缺点确实有一些合理的观点可以提出。但是，使用框架也有许多优点。

## 使用框架的理由

以下是您可能考虑使用框架的一些原因:

- **快速开发**：框架提供了大量开箱即用的功能。这意味着您可以更快地构建 Web 应用程序。您无需编写太多代码，因为框架提供了许多您所需功能。
- **一致性**：框架提供了一种一致的工作方式。这使您更容易理解代码的工作方式，也使其他开发人员更容易理解您的代码。如果您按照脚本编写代码，尤其是在与开发团队合作时，可能会丢失脚本之间的一致性。
- **安全性**：框架提供了安全功能，有助于保护您的 Web 应用程序免受常见安全威胁。这意味着您无需过多担心安全性问题，因为框架会为您处理大部分工作。
- **社区**：框架有庞大的开发人员社区为框架做出贡献。这意味着当您遇到问题时，可以从其他开发人员那里获得帮助。这还意味着有大量资源可帮助您学习如何使用框架。
- **最佳实践**：框架使用最佳实践构建。这意味着您可以从框架中学习并在自己的代码中使用相同的最佳实践。这有助于您成为更好的程序员。有时您不知道自己不知道什么，这可能在最终让您吃亏。
- **可扩展性**：框架设计用于扩展。这意味着可以向框架添加自己的功能。这使您能够构建根据自己特定需求定制的 Web 应用程序。

Flight 是一个微型框架。这意味着它小巧轻便。它没有像 Laravel 或 Symfony 这样的大型框架提供的功能多。但是，它确实提供了构建 Web 应用程序所需的许多功能。而且，它也易于学习和使用。这使得它成为快速轻松构建 Web 应用程序的不错选择。如果您是框架新手，Flight 是一个很好的初学者框架。它将帮助您了解使用框架的优势，而不会用过多的复杂性让您感到不知所措。有了一些 Flight 的经验后，进而转向像 Laravel 或 Symfony 这样更复杂的框架将会更容易，然而 Flight 仍然可以构建出成功的健壮应用程序。

## 什么是路由？

路由是 Flight 框架的核心，但它到底是什么呢？路由是将 URL 与代码中的特定函数进行匹配的过程。这是您可以根据请求的 URL 使您的网站执行不同操作的方式。例如，当用户访问 `/user/1234` 时，您可能希望显示用户的个人资料，但当他们访问 `/users` 时，可能希望显示所有用户的列表。这一切都是通过路由完成的。

可能会是这样的工作流程：  
- 用户在浏览器中输入 `http://example.com/user/1234`。
- 服务器接收请求并查看 URL，将其传递给您的 Flight 应用程序代码。
- 假设在您的 Flight 代码中有类似 `Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);` 的内容。Flight 应用程序代码查看 URL，看到它与您定义的路由匹配，然后运行您为该路由定义的代码。
- Flight 路由器将运行并调用 `UserController` 类中的 `viewUserProfile($id)` 方法，在方法中将 `1234` 作为 `$id` 参数传递。
- `viewUserProfile()` 方法中的代码将运行并执行您告诉它执行的操作。您可能最终回显出用户个人资料页面的一些 HTML，或者如果这是一个 RESTful API，您可能会回显用户信息的 JSON 响应。
- Flight 将其处理并生成响应标头，并将其发送回用户的浏览器。
- 用户感到高兴并给自己一个温暖的拥抱！

### 为什么重要？

拥有一个适当的集中式路由器实际上可以显著简化您的生活！一开始可能很难看到。以下是为何重要的一些原因：
- **集中式路由**：您可以将所有路由保存在一个地方。这使您更容易查看您拥有哪些路由及其功能。如果需要，这也使更改它们变得更容易。
- **路由参数**：您可以使用路由参数将数据传递给路由方法。这是保持代码干净和有组织的好方法。
- **路由组**：您可以将路由分组在一起。这对保持代码有组织和将 [中间件](middleware) 应用于一组路由非常有用。
- **路由别名**：您可以为路由分配别名，以便稍后在代码中动态生成相应的 URL（例如，像模板一样）。例如：不用在代码中将 `/user/1234` 硬编码，您可以引用别名 `user_view` 并将 `id` 作为参数传递。这使得以后决定将其更改为 `/admin/user/1234` 变得很方便。您不必更改所有硬编码的 URL，只需更改与路由相关联的 URL。
- **路由中间件**：您可以向路由添加中间件。中间件非常强大，可以向您的应用程序添加特定行为，例如验证某个用户是否可以访问路由或组的中的路由。

相信您对逐个脚本方式创建网站是熟悉的。您可能有一个名为 `index.php` 的文件，其中有很多 `if` 语句来检查 URL，然后根据 URL 运行特定函数。这是一种路由方式，但不是很有组织且很快就会失控。Flight 的路由系统是一种更有组织和强大的处理路由方式。

这个？

```php

// /user/view_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	viewUserProfile($id);
}

// /user/edit_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	editUserProfile($id);
}

// etc...
```

或者这个？

```php

// index.php
Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);
Flight::route('/user/@id/edit', [ 'UserController', 'editUserProfile' ]);

// 在您的 app/controllers/UserController.php 中
class UserController {
	public function viewUserProfile($id) {
		// do something
	}

	public function editUserProfile($id) {
		// do something
	}
}
```

希望您能开始看到使用集中式路由系统的好处。从长远来看，这更容易管理和理解！

## 请求和响应

Flight 提供了一种简单易用的方式来处理请求和响应。这是 Web 框架的核心。它接收用户浏览器发来的请求，处理它，然后发送回响应。这是您可以构建能够显示用户个人资料、让用户登录或让用户发布新博文等 Web 应用程序的方式。

### 请求

请求是用户浏览器在访问您的网站时发送到服务器的东西。这个请求包含有关用户想要执行的操作的信息。例如，它可能包含关于用户要访问的 URL、用户要发送给服务器的数据或用户要从服务器接收的数据类型的信息。重要的是要知道请求是只读的。您无法更改请求，但可以从中读取。

Flight 提供了一种简单的方法来访问有关请求的信息。您可以使用 `Flight::request()` 方法访问有关请求的信息。此方法返回包含请求信息的 `Request` 对象。您可以使用此对象访问请求的信息，例如 URL、方法或用户发送到服务器的数据。

### 响应

响应是服务器在用户访问您的网站时发送回用户浏览器的内容。该响应包含有关服务器想要执行的操作的信息。例如，它可能包含有关服务器想要发送给用户的数据类型、服务器希望从用户接收的数据类型或服务器希望在用户计算机上存储的数据类型的信息。

Flight 提供了一种将响应发送回用户浏览器的简单方法。您可以使用 `Flight::response()` 方法发送响应。该方法接受一个 `Response` 对象作为参数，并将响应发送回用户浏览器。您可以使用此对象将响应发送回用户浏览器，例如 HTML、JSON 或文件。Flight 帮助您自动生成响应的部分以使事情变得容易，但最终您可以控制发送给用户的内容。