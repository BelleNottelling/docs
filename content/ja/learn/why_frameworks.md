# なぜフレームワークを使用するのか？

一部のプログラマーはフレームワークの使用に断固反対しています。フレームワークは膨大で、遅く、学ぶのが難しいと主張しています。彼らは、フレームワークは不要であり、それらなしでより良いコードを書くことができると述べています。フレームワークを使用することの欠点についてはいくつかの正当な指摘があるかもしれません。ただし、フレームワークを使用する利点も多数あります。

## フレームワークを使用する理由

以下は、フレームワークを使用する理由のいくつかです:

- **高速な開発**: フレームワークには多くの機能が最初から用意されています。これにより、Webアプリケーションをより迅速に構築できます。必要な機能の多くをフレームワークが提供しているため、多くのコードを書く必要がありません。
- **一貫性**: フレームワークは作業方法の一貫性を提供します。これにより、コードがどのように機能するかを理解しやすくなり、他の開発者がコードを理解しやすくなります。開発者チームと作業している場合、特にスクリプトごとに作業している場合、スクリプト間で一貫性が失われる可能性があります。
- **セキュリティ**: フレームワークは、一般的なセキュリティ脅威からWebアプリケーションを保護するのに役立つセキュリティ機能を提供します。これは、フレームワークがその多くを対処しているため、セキュリティについてあまり心配する必要がないことを意味します。
- **コミュニティ**: フレームワークには、フレームワークに貢献する多くの開発者コミュニティが存在します。これにより、質問や問題を抱えているときに他の開発者から助けを得ることができます。また、フレームワークの使用方法を学ぶのに役立つリソースがたくさんあることを意味します。
- **ベストプラクティス**: フレームワークは、ベストプラクティスを使用して構築されています。これは、フレームワークから学び、自分のコードでも同じベストプラクティスを使用できることを意味します。これにより、より優れたプログラマーになるのに役立ちます。時には自分が何を知らないかわからないことがあり、最終的にはそれが重要になるかもしれません。
- **拡張性**: フレームワークは拡張可能に設計されています。つまり、フレームワークに独自の機能を追加できます。これにより、特定のニーズに合わせたWebアプリケーションを構築できます。

Flight（フライト）はマイクロフレームワークです。これは小さく軽量です。 Laravel や Symfony のような大規模なフレームワークほど多くの機能を提供していませんが、Webアプリケーションを構築するために必要な機能の多くを提供しています。また、学習や使用が容易です。これにより、素早く簡単にWebアプリケーションを構築するのに適しています。フレームワークに新しい場合、Flightは初心者向けの素晴らしいフレームワークです。フレームワークの利点を学びながら、複雑すぎることなくFlightで経験を積んだ後は、より複雑なフレームワークである Laravel や Symfony に移行することがより簡単になりますが、Flightでも成功を収める堅牢なアプリケーションを作成できます。

## ルーティングとは？

ルーティングは Flight フレームワークの中核ですが、それは正確には何でしょうか？ ルーティングは、URL を取得し、その URL をコード内の特定の関数に一致させるプロセスです。これにより、リクエストされた URL に基づいてウェブサイトで異なる操作を行うことができます。たとえば、ユーザーが `/user/1234` を訪れた場合にはユーザープロフィールを表示したいが、`/users` を訪れた場合にはすべてのユーザーのリストを表示したいと思うことができます。これはすべてルーティングを通じて行われます。

これは次のように機能するかもしれません:

- ユーザーがブラウザで `http://example.com/user/1234` を入力します。
- サーバーはリクエストを受け取り、URL を確認して Flight アプリケーションコードに渡します。
- Flight コード内に `Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);` のようなものがあるとしましょう。Flight アプリケーションコードは URL を確認し、定義したルートに一致することを検出し、そのルートに対して定義したコードを実行します。
- Flight ルーターは次に、`UserController` クラス内の `viewUserProfile($id)` メソッドを呼び出し、メソッド内の `$id` 引数に `1234` を渡します。
- `viewUserProfile()` メソッド内のコードが実行され、指示された動作が行われます。ユーザーのプロフィールページの HTML をエコーするか、これが RESTful API の場合、ユーザー情報を含む JSON 応答をエコーするかもしれません。
- Flight はこれをきれいなリボンで包み、応答ヘッダーを生成してユーザーのブラウザに返します。
- ユーザーは喜びに満たされ、自分自身に暖かいハグをします！

### なぜ重要なのか？

適切な中央集約型のルーターを持つことは、実際にはあなたの生活を劇的に容易にするかもしれません！最初は見つけにくいかもしれませんが。以下は、その重要性を理解するためのいくつかの理由です:

- **中央集約型のルーティング**: すべてのルートを1か所にまとめることができます。これにより、使用しているルートとその動作を把握しやすくなり、必要に応じて変更するのも簡単になります。
- **ルートパラメータ**: ルートパラメータを使用してデータをルートメソッドに渡すことができます。これはコードをきれいで整理された状態に保つ良い方法です。
- **ルートグループ**: ルートをグループ化することができます。これはコードを整理し、複数のルートに [middleware](middleware) を適用するのに役立ちます。
- **ルートエイリアシング**: ルートにエイリアスを割り当てることができます。そのため、後で動的に URL を生成できます（たとえば、テンプレートのように）。例: コード内で `/user/1234` をハードコードする代わりに、代わりにエイリアス `user_view` を参照し、`id` をパラメータとして渡すことができます。後で `/admin/user/1234` に変更することに決めた場合、すべてのハードコーディングされた URL を変更する必要はありません。
- **ルートミドルウェア**: ルートにミドルウェアを追加することができます。ミドルウェアは、アプリケーションに特定の動作を追加する際に非常に強力です。

おそらく、ウェブサイトを作成する際のスクリプトごとの方法についてよくご存知でしょう。`index.php` というファイルがあるかもしれません。そのファイルには、URL をチェックし、その URL に基づいて特定の機能を実行するための `if` ステートメントがいくつも含まれているかもしれません。これはルーティングの一形態ですが、整理されていないため迅速に問題が複雑化してしまう可能性があります。Flight のルーティングシステムは、ルーティングを処理するより整理されたかつ強力な方法です。

これ？

```php

// /user/view_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	viewUserProfile($id);
}

// /user/edit_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	editUserProfile($id);
}

// etc...
```

それともこれ？

```php

// index.php
Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);
Flight::route('/user/@id/edit', [ 'UserController', 'editUserProfile' ]);

// おそらく app/controllers/UserController.php 内に
class UserController {
	public function viewUserProfile($id) {
		// 何かを行う
	}

	public function editUserProfile($id) {
		// 何かを行う
	}
}
```

中央集約型のルーティングシステムを使用する利点がよくわかると思います。最終的には、より管理しやすく理解しやすいです！

## リクエストとレスポンス

Flight はリクエストとレスポンスを処理するシンプルで簡単な方法を提供します。これがウェブフレームワークの中核です。ユーザーのブラウザからのリクエストを受け取り、それを処理してユーザーのブラウザに応答を返します。これにより、ユーザーのプロフィールを表示したり、ユーザーのログインを許可したり、ユーザーが新しいブログ記事を投稿できるようなウェブアプリケーションを構築できます。

### リクエスト

リクエストとは、ユーザーがウェブサイトを訪れたときにユーザーのブラウザからサーバーに送信されるものです。このリクエストには、ユーザーが行いたいアクションに関する情報が含まれます。たとえば、ユーザーが訪れたいURL、ユーザーがサーバーに送信したいデータまたはサーバーから受信したいデータの種類などが含まれる可能性があります。重要なのは、リクエストは読み取り専用であることです。リクエストを変更することはできませんが、それを読むことはできます。

Flight はリクエストに関する情報にアクセスする簡単な方法を提供します。`Flight::request()` メソッドを使用してリクエストに関する情報にアクセスできます。このメソッドは、リクエストに関する情報を含む `Request` オブジェクトを返します。このオブジェクトを使用して、リクエストに関する情報にアクセスしたり、URL、メソッド、ユーザーがサーバーに送信したデータなどにアクセスしたりできます。

### レスポンス

レスポンスとは、ユーザーのブラウザに訪れたときにサーバーからユーザーのブラウザに送信されるものです。このレスポンスには、サーバーが行いたいアクションに関する情報が含まれます。たとえば、サーバーがユーザーに送信したいデータの種類、ユーザーから受け取りたいデータの種類、サーバーがユーザーのコンピューターに保存したいデータの種類などが含まれる可能性があります。

Flight はユーザーのブラウザにレスポンスを送信する簡単な方法を提供します。`Flight::response()` メソッドを使用してレスポンスを送信できます。このメソッドは、`Response` オブジェクトを引数として取り、そのレスポンスをユーザーのブラウザに送信します。このオブジェクトを使用して、HTML、JSON、ファイルなどをユーザーのブラウザに送信できます。Flight はレスポンスの一部を自動生成して処理を簡単にしますが、最終的にはユーザーに送り返す内容を完全に制御できます。