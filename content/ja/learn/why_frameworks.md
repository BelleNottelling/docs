# なぜフレームワークを使用するのか？

一部のプログラマーは、フレームワークの使用に強く反対しています。フレームワークは膨大で、遅く、学習が難しいと主張しています。彼らは、フレームワークは不要であり、フレームワークを使わずにより良いコードを書くことができると述べています。フレームワークの利点については、いくつかの妥当な点が挙げられています。ただし、フレームワークを使用するメリットもたくさんあります。

## フレームワークを使用する理由

ここに、フレームワークを考慮する理由のいくつかがあります:

- **高速な開発**：フレームワークはボックスから多くの機能を提供します。これは、Webアプリケーションをより迅速に構築できることを意味します。フレームワークが必要とする機能の多くを提供しているため、多くのコードを書く必要がありません。
- **一貫性**：フレームワークは、作業を行う一貫した方法を提供します。これにより、コードの動作方法が理解しやすくなり、他の開発者がコードを理解しやすくなります。開発チームと連携して作業する場合、スクリプトごとに一貫性が失われる可能性があります。 
- **セキュリティ**：フレームワークは、一般的なセキュリティ脅威からWebアプリケーションを保護するのに役立つセキュリティ機能を提供します。フレームワークが多くの部分を処理しているため、セキュリティについて心配する必要がありません。
- **コミュニティ**：フレームワークには、フレームワークへの貢献をする大規模な開発者コミュニティが存在します。つまり、質問や問題がある場合に他の開発者から支援を受けられるということです。また、フレームワークの使用方法を学ぶのに利用できるリソースが多数あるということです。
- **ベストプラクティス**：フレームワークは、ベストプラクティスを使用して構築されています。これにより、フレームワークから学び、自分自身のコードでも同じベストプラクティスを使用できます。これにより、より優れたプログラマーになることができます。時には、自分の無知に気付かないことがあり、最終的には問題となることがあります。
- **拡張性**：フレームワークは拡張可能に設計されています。つまり、フレームワークに独自の機能を追加することができます。これにより、特定のニーズに合わせたWebアプリケーションを構築できます。

Flightはマイクロフレームワークです。つまり、小さく軽量です。LaravelやSymfonyのような大規模なフレームワークほど多くの機能を提供していません。しかし、Webアプリケーションを構築するために必要な機能の多くを提供します。また、学習しやすく使いやすいです。これにより、迅速かつ簡単にWebアプリケーションを構築するのに適しています。フレームワークに初めて触れる場合、Flightは初心者向けの素晴らしいフレームワークです。フレームワークの利点を学びながら、複雑さが過多になることなく Flightを利用することで、後でLaravelやSymfonyのような複雑なフレームワークに移行しやすくなります。ただし、Flightを使用しても優れた堅牢なアプリケーションを作成することができます。

## ルーティングとは？

ルーティングはFlightフレームワークの中核ですが、それは具体的に何でしょうか？ ルーティングはURLを取得して、コード内の特定の関数に一致させるプロセスです。これにより、WebサイトがリクエストされたURLに基づいて異なる操作を実行できます。例えば、ユーザーが `/user/1234` を訪れたときはユーザーのプロフィールを表示する必要がありますが、`/users` を訪れたときはすべてのユーザーのリストを表示する必要があります。 これはすべて、ルーティングによって実行されます。

以下のように機能するかもしれません:

- ユーザーがブラウザで `http://example.com/user/1234` と入力します。
- サーバーはリクエストを受け取り、URLを確認して Flight アプリケーションコードに渡します。
- Flightコードで `Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);` のようなものがあるとします。FlightアプリケーションコードはURLを確認し、定義されているルートに一致することが分かり、そのルートに対して定義されたコードを実行します。
- 次に、Flightルーターは `UserController` クラス内の `viewUserProfile($id)` メソッドを呼び出し、メソッド内の `$id` 引数に `1234` を渡します。
- `viewUserProfile()` メソッド内のコードが実行され、指示された操作が実行されます。その結果、ユーザーのプロフィールページのHTMLを出力するかもしれません。また、RESTful APIの場合は、ユーザー情報を含むJSON応答を出力するかもしれません。
- Flightはこれをきれいな包装紙で包み、応答ヘッダーを生成してユーザーのブラウザに返します。
- ユーザーは喜びに満ち、自分自身に暖かい抱擁をします！

### そして、なぜ重要なのか？

適切な中央集権型のルーターを持っていると、実際には生活が格段に簡単になるかもしれません！ 最初は見えにくいかもしれませんが、ここにいくつかの理由があります:

- **中央集権ルーティング**：すべてのルートを一つの場所に保持できます。これにより、持っているルートとその機能を見ることが容易になります。また、必要に応じて変更する際も簡単になります。
- **ルートパラメータ**：ルートパラメータを使用してデータをルートメソッドに渡すことができます。これはコードをクリーンで整理された状態に保つ素晴らしい方法です。
- **ルートグループ**：ルートをグループ化することができます。これはコードを整理し、[middleware](middleware)をルートグループに適用するために素晴らしいです。
- **ルートエイリアス**：ルートにエイリアスを割り当てることができます。そのため、後でコード内でURLを動的に生成できます（たとえば、テンプレートのように）。 例えば、コード内で `/user/1234` をハードコードする代わりに、エイリアス `user_view` を参照し、パラメータとして `id` を渡すことができます。後で `/admin/user/1234` に変更することに決定した場合でも、すべてのハードコードされたURLを変更する必要はありません。ルートにアタッチされたURLのみを変更すればよいのです。
- **ルートミドルウェア**：ルートにミドルウェアを追加することができます。ミドルウェアは、特定のユーザーがルートまたはルートグループにアクセスできるように認証するなど、アプリケーションに特定の動作を追加するのに非常に強力です。

おそらく、ウェブサイトを作成する際のスクリプトごとの方法には慣れているはずです。`index.php` というファイルがあり、URLをチェックし、URLに基づいて特定の機能を実行する `if` ステートメントがいくつかあるかもしれません。これは一種のルーティングですが、整理されていないため、すぐに手に負えなくなる可能性があります。Flightのルーティングシステムは、より整理され、強力なルーティングを処理するよりよい方法です。

これは？

```php
// /user/view_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	viewUserProfile($id);
}

// /user/edit_profile.php?id=1234
if ($_GET['id']) {
	$id = $_GET['id'];
	editUserProfile($id);
}

// その他...
```

それとこれ？

```php
// index.php
Flight::route('/user/@id', [ 'UserController', 'viewUserProfile' ]);
Flight::route('/user/@id/edit', [ 'UserController', 'editUserProfile' ]);

// おそらく、app/controllers/UserController.php 内に
class UserController {
	public function viewUserProfile($id) {
		// 何かする
	}

	public function editUserProfile($id) {
		// 何かする
	}
}
```

中央集権型のルーティングシステムを使用する利点が見えてくると思います。長期的に管理および理解するのがはるかに簡単です！

## リクエストとレスポンス

Flightはリクエストとレスポンスを処理する簡単で便利な方法を提供しています。これはウェブフレームワークの中心部分です。ユーザーのブラウザからのリクエストを受け取り、処理し、結果としてユーザーにレスポンスを返します。これにより、ユーザーのプロフィールを表示したり、ユーザーのログインを可能にしたり、ユーザーが新しいブログ記事を投稿したりするようなウェブアプリケーションを構築できます。

### リクエスト

リクエストとは、ユーザーのブラウザがウェブサイトを訪れたときにサーバーに送信するものです。このリクエストには、ユーザーが何をしたいかに関する情報が含まれます。例えば、ユーザーが訪れたいURLに関する情報、ユーザーがサーバーに送信したいデータ、ユーザーがサーバーから受け取りたいデータの種類などが含まれる場合があります。リクエストは読み取り専用であることに注意してください。リクエストを変更することはできませんが、読むことはできます。

Flightはリクエストに関する情報に簡単にアクセスする方法を提供しています。`Flight::request()` メソッドを使用してリクエストに関する情報にアクセスできます。このメソッドは、リクエストに関する情報が含まれた `Request` オブジェクトを返します。このオブジェクトを使用して、URL、メソッド、またはユーザーがサーバーに送信したデータなどのリクエストに関する情報にアクセスできます。

### レスポンス

レスポンスとは、ユーザーのブラウザがウェブサイトを訪れたときにサーバーからユーザーのブラウザに送信されるものです。このレスポンスには、サーバーが何をしたいかに関する情報が含まれます。たとえば、サーバーがユーザーに送信したいデータの種類や、ユーザーから受け取りたいデータの種類、ユーザーのコンピュータに保存したいデータの種類などが含まれる場合があります。

Flightは、ユーザーのブラウザにレスポンスを送信する簡単な方法を提供しています。`Flight::response()` メソッドを使用してレスポンスを送信できます。このメソッドは `Response` オブジェクトを引数として受け取り、そのレスポンスをユーザーのブラウザに送信します。このオブジェクトを使用して、HTMLやJSON、ファイルなどのレスポンスをユーザーのブラウザに送信できます。Flightはレスポンスの一部を自動生成して処理を簡単にしますが、最終的にはユーザーに返す内容をコントロールできます。